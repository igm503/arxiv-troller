{% extends 'papers/base.html' %}

{% block title %}Search Papers - arXiv{% endblock %}

{% block content %}
<div class="search-form">
    <form method="get">
        <input type="text" 
               name="q" 
               value="{{ query }}" 
               placeholder="Search papers by title..." 
               autofocus>
        <button type="submit">Search</button>
    </form>
</div>

{% if query %}
    {% if papers %}
        <h2 style="margin-bottom: 1rem;">Search Results for "{{ query }}"</h2>
        <p style="color: #666; margin-bottom: 1.5rem;">Found {{ papers|length }} papers</p>
        
        {% for paper in papers %}
        <div class="paper-card">
            <div class="paper-title">
                <a href="{% url 'papers:detail' paper.id %}">{{ paper.title }}</a>
            </div>
            <div class="paper-authors">
                {% for author_rel in paper.paperauthor_set.all %}
                    {{ author_rel.author }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </div>
            <div class="paper-id">arXiv:{{ paper.arxiv_id }}</div>
        </div>
        {% endfor %}
    {% else %}
        <div class="paper-card">
            <p>No papers found matching "{{ query }}". Try a different search term.</p>
        </div>
    {% endif %}
{% else %}
    <div class="paper-card">
        <p>Enter a search term above to find papers by title.</p>
    </div>
{% endif %}
{% endblock %}
